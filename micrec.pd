#N canvas -32000 -32000 128 0 10;
#X obj 83 588 *~;
#X floatatom 104 408 6 0 0 0 - - -, f 6;
#X obj 104 381 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 83 438 gate;
#X obj 104 300 r count;
#X floatatom 104 327 5 0 0 0 - - -, f 5;
#X obj 104 352 sel 1;
#X obj 96 68 bng 26 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X text 127 73 record a sample!;
#X obj 96 229 tgl 26 0 empty empty empty 17 7 0 10 -262144 -258049
-1 0 1;
#X text 29 234 recording?;
#N canvas 567 163 843 550 samplestart 0;
#X obj 202 143 bonk~;
#X obj 230 80 loadbang;
#X obj 115 275 timer, f 16;
#X obj 115 305 * 44.1;
#X obj 208 212 gate;
#X obj 208 240 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 177 227 0;
#X obj 115 362 outlet;
#X obj 202 48 inlet~;
#X text 23 212 receives from pd samplerec subpatch, f 13;
#X text 57 122 checks recording state;
#X obj 115 333 - 4096;
#X text 298 108 minimum "velocity" to output (quieter notes are ignored)
;
#X obj 111 143 r \$0-recstate;
#X obj 115 227 r \$0-stim;
#X msg 230 108 minvel 25;
#X connect 0 1 4 1;
#X connect 1 0 15 0;
#X connect 2 0 3 0;
#X connect 3 0 11 0;
#X connect 4 0 5 0;
#X connect 5 0 2 1;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 8 0 0 0;
#X connect 11 0 7 0;
#X connect 13 0 4 0;
#X connect 14 0 2 0;
#X connect 15 0 0 0;
#X restore 180 176 pd samplestart;
#X obj 83 272 == 0;
#X text 141 352 triggers recorded sample at beat ...;
#X text 146 408 plays recording from ...nth sample;
#X obj 98 520 loopcue;
#X obj 96 27 inlet;
#X obj 83 620 outlet~;
#X obj 156 300 inlet;
#X obj 165 135 inlet~;
#X obj 180 245 s \$0-bonk;
#X obj 124 380 r \$0-bonk;
#X obj 115 272 outlet;
#X obj 83 461 tabplay~ \$0-sample;
#N canvas 1199 415 795 614 samplerec 1;
#X obj 348 200 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X obj 225 168 sel 1, f 21;
#X msg 348 220 stop;
#X obj 238 199 del 64;
#X obj 225 105 counter 1;
#X obj 225 76 inlet;
#X obj 241 137 outlet;
#X obj 396 220 inlet~;
#X text 47 76 sr: stops recording;
#X text 65 236 start timer in pd samplestart subpatch, f 14;
#X obj 286 199 del 4000;
#X obj 59 135 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 348 262 tabwrite~ \$0-sample;
#X text 357 289 sample waveform:;
#X text 488 310 = 4 seconds @ 44.1kHz;
#X obj 348 310 table \$0-sample 176400;
#X msg 225 297 \; \$0-sample const 0;
#X msg 59 160 \; \$0-sample normalize -1 1;
#X obj 287 137 s \$0-recstate;
#X obj 158 249 s \$0-stim;
#X obj 286 262 s \$0-sr;
#X obj 171 76 r \$0-sr;
#X obj 238 262 t b;
#X obj 238 240 r ks;
#X connect 0 0 2 0;
#X connect 1 0 16 0;
#X connect 1 0 3 0;
#X connect 1 0 10 0;
#X connect 1 0 19 0;
#X connect 1 1 0 0;
#X connect 2 0 10 0;
#X connect 2 0 12 0;
#X connect 3 0 12 0;
#X connect 4 0 1 0;
#X connect 4 0 6 0;
#X connect 4 0 18 0;
#X connect 5 0 4 0;
#X connect 7 0 12 0;
#X connect 10 0 20 0;
#X connect 11 0 17 0;
#X connect 21 0 4 0;
#X connect 21 0 11 0;
#X connect 22 0 16 0;
#X connect 23 0 22 0;
#X restore 96 176 pd samplerec;
#X obj 174 520 inlet;
#X connect 0 0 17 0;
#X connect 1 0 3 1;
#X connect 2 0 1 0;
#X connect 3 0 23 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 2 0;
#X connect 7 0 24 0;
#X connect 9 0 12 0;
#X connect 9 0 22 0;
#X connect 11 0 20 0;
#X connect 12 0 3 0;
#X connect 15 0 0 1;
#X connect 16 0 7 0;
#X connect 18 0 6 1;
#X connect 19 0 11 0;
#X connect 19 0 24 1;
#X connect 21 0 1 0;
#X connect 23 0 0 0;
#X connect 24 0 9 0;
#X connect 25 0 15 0;
